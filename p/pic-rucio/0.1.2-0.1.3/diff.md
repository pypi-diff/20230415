# Comparing `tmp/pic_rucio-0.1.2-py3-none-any.whl.zip` & `tmp/pic_rucio-0.1.3-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 22203 bytes, number of entries: 16
--rw-rw-rw-  2.0 unx     1311 b- defN 23-Apr-15 13:34 pic_rucio-0.1.2.data/data/etc/rucio.cfg.atlas.client.template
--rwxr-xr-x  2.0 unx     2020 b- defN 23-Apr-15 13:35 pic_rucio-0.1.2.data/scripts/pic_rucio
--rw-r--r--  2.0 unx      163 b- defN 23-Apr-15 13:34 transfer_agents/__init__.py
--rw-r--r--  2.0 unx     1755 b- defN 23-Apr-15 13:34 transfer_agents/commons.py
--rw-r--r--  2.0 unx     6838 b- defN 23-Apr-15 13:34 transfer_agents/db_functions.py
--rw-rw-rw-  2.0 unx     1397 b- defN 23-Apr-15 13:34 transfer_agents/es_body.json
--rw-r--r--  2.0 unx    10738 b- defN 23-Apr-15 13:34 transfer_agents/es_query.py
--rw-r--r--  2.0 unx    10377 b- defN 23-Apr-15 13:34 transfer_agents/metadata.py
--rw-rw-rw-  2.0 unx      174 b- defN 23-Apr-15 13:34 transfer_agents/requirements.txt
--rw-r--r--  2.0 unx    27731 b- defN 23-Apr-15 13:34 transfer_agents/rucio_functions.py
--rw-rw-rw-  2.0 unx    31370 b- defN 23-Apr-15 13:34 transfer_agents/sample.yaml
--rw-rw-rw-  2.0 unx     1074 b- defN 23-Apr-15 13:35 pic_rucio-0.1.2.dist-info/LICENSE
--rw-r--r--  2.0 unx     3154 b- defN 23-Apr-15 13:35 pic_rucio-0.1.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-15 13:35 pic_rucio-0.1.2.dist-info/WHEEL
--rw-r--r--  2.0 unx       34 b- defN 23-Apr-15 13:35 pic_rucio-0.1.2.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1383 b- defN 23-Apr-15 13:35 pic_rucio-0.1.2.dist-info/RECORD
-16 files, 99611 bytes uncompressed, 19911 bytes compressed:  80.0%
+Zip file size: 22224 bytes, number of entries: 16
+-rw-rw-rw-  2.0 unx     1311 b- defN 23-Apr-15 20:07 pic_rucio-0.1.3.data/data/etc/rucio.cfg.atlas.client.template
+-rwxr-xr-x  2.0 unx     2020 b- defN 23-Apr-15 20:08 pic_rucio-0.1.3.data/scripts/pic_rucio
+-rw-r--r--  2.0 unx      163 b- defN 23-Apr-15 20:07 transfer_agents/__init__.py
+-rw-r--r--  2.0 unx     1755 b- defN 23-Apr-15 20:07 transfer_agents/commons.py
+-rw-r--r--  2.0 unx     6838 b- defN 23-Apr-15 20:07 transfer_agents/db_functions.py
+-rw-rw-rw-  2.0 unx     1397 b- defN 23-Apr-15 20:07 transfer_agents/es_body.json
+-rw-r--r--  2.0 unx    10646 b- defN 23-Apr-15 20:07 transfer_agents/es_query.py
+-rw-r--r--  2.0 unx    10377 b- defN 23-Apr-15 20:07 transfer_agents/metadata.py
+-rw-rw-rw-  2.0 unx      174 b- defN 23-Apr-15 20:07 transfer_agents/requirements.txt
+-rw-r--r--  2.0 unx    27731 b- defN 23-Apr-15 20:07 transfer_agents/rucio_functions.py
+-rw-rw-rw-  2.0 unx    31461 b- defN 23-Apr-15 20:07 transfer_agents/sample.yaml
+-rw-rw-rw-  2.0 unx     1074 b- defN 23-Apr-15 20:08 pic_rucio-0.1.3.dist-info/LICENSE
+-rw-r--r--  2.0 unx     3154 b- defN 23-Apr-15 20:08 pic_rucio-0.1.3.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-15 20:08 pic_rucio-0.1.3.dist-info/WHEEL
+-rw-r--r--  2.0 unx       34 b- defN 23-Apr-15 20:08 pic_rucio-0.1.3.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1383 b- defN 23-Apr-15 20:08 pic_rucio-0.1.3.dist-info/RECORD
+16 files, 99610 bytes uncompressed, 19932 bytes compressed:  80.0%
```

## zipnote {}

```diff
@@ -1,11 +1,11 @@
-Filename: pic_rucio-0.1.2.data/data/etc/rucio.cfg.atlas.client.template
+Filename: pic_rucio-0.1.3.data/data/etc/rucio.cfg.atlas.client.template
 Comment: 
 
-Filename: pic_rucio-0.1.2.data/scripts/pic_rucio
+Filename: pic_rucio-0.1.3.data/scripts/pic_rucio
 Comment: 
 
 Filename: transfer_agents/__init__.py
 Comment: 
 
 Filename: transfer_agents/commons.py
 Comment: 
@@ -27,23 +27,23 @@
 
 Filename: transfer_agents/rucio_functions.py
 Comment: 
 
 Filename: transfer_agents/sample.yaml
 Comment: 
 
-Filename: pic_rucio-0.1.2.dist-info/LICENSE
+Filename: pic_rucio-0.1.3.dist-info/LICENSE
 Comment: 
 
-Filename: pic_rucio-0.1.2.dist-info/METADATA
+Filename: pic_rucio-0.1.3.dist-info/METADATA
 Comment: 
 
-Filename: pic_rucio-0.1.2.dist-info/WHEEL
+Filename: pic_rucio-0.1.3.dist-info/WHEEL
 Comment: 
 
-Filename: pic_rucio-0.1.2.dist-info/top_level.txt
+Filename: pic_rucio-0.1.3.dist-info/top_level.txt
 Comment: 
 
-Filename: pic_rucio-0.1.2.dist-info/RECORD
+Filename: pic_rucio-0.1.3.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## transfer_agents/es_query.py

```diff
@@ -212,15 +212,14 @@
             self.logger.info(
                 f'Processing status: {self.psql_status[status]["pql_id"]}')
 
             # Get list of files from database
             query = self.query_search().format(
                 status=self.psql_status[status]['pql_id'])
             list_files = self.db.execute_query(query)
-
             # Loop through each file
             for single_file in list_files:
                 # Query Elasticsearch for file information
                 query = self.es_query(single_file, scope,
                                       self.psql_status[status]['es_id'])
                 res = self.connect_elasticsearch().search(index="rucio-*", query=query)
 
@@ -236,26 +235,24 @@
                 except KeyError as e:
                     self.logger.warning(f'Field not found in Elasticsearch response: {e}')
                     created_at = None
 
                 # If additional search is required and creation date is available
                 if self.additional_search() and created_at:
                     # Perform additional search for file
-                    add_query = self.additional_query().format(file=single_file)
-                    id_files = self.db.execute_query(add_query)[0][0]
+                    add_query = self.additional_query()
+                    add_query = add_query.format('%s' % single_file)
+                    id_files = list(self.db.execute_query(add_query))[0]
                     self.logger.info(id_files)
 
                     # Prepare insert and update queries
-                    in_query = self.query_insert().format(id_files=id_files, created_at=created_at,
-                                                          next_status=self.psql_status[status]['next_status'])
-                    up_query = self.query_update().format(
-                        next_status=self.psql_status[status]['next_status'], id_files=id_files)
+                    in_query = self.query_insert().format(id_files, created_at, self.psql_status[status]['next_status'])
+                    up_query = self.query_update().format(self.psql_status[status]['next_status'], id_files)
                     self.logger.info(in_query)
                     self.logger.info(up_query)
-
                     # Execute insert and update queries (if not a mock run)
                     if not self.mock_run:
                         self.logger.info(
                             f'Real run, updating and inserting into database (mock run set to {self.mock_run})')
                         try:
                             self.db.commit_changes(in_query)
                         except Exception:
@@ -276,8 +273,7 @@
                             linecache.checkcache(filename)
                             line = linecache.getline(filename, lineno, f.f_globals)
                             self.logger.warning('EXCEPTION IN ({}, LINE {} "{}"): {}'.format(filename, lineno, line.strip(), exc_obj))
                     else:
                         self.logger.info(
                             '- This is a mock run, no entry will be updated or inserted.')
 
-
```

## transfer_agents/sample.yaml

```diff
@@ -1,18 +1,19 @@
 elasticsearch:
   additional_query: select id from element where name = '%s' ;
   additional_search: true
   host: es.pic.es
   mock_run: false
   passwd: null
   port: 9200
-  query_insert: INSERT INTO status_history(element_id, timestamp, status) VALUES ('%s','%s','%s');
-  query_search: SELECT name FROM element where status = '${status}' and ( name like
-    '%.root' or  name like '%.raw.gz' );
-  query_update: update element set status = '%s' where id = '%s';
+  query_search: SELECT name FROM element where status = '{status}' and ( name like '%.root' or  name like '%.raw.gz' );
+  query_insert: "INSERT INTO status_history(element_id, timestamp, status) VALUES ('{}','{}','{}');"
+  query_update: "update element set status = '{}' where id = '{}';"
+  additional_search: True
+  additional_query: "select id from element where name = '{0}' ;"
   schema: http
   user: null
 psql:
   db: multivac
   host: ''
   passwd: ''
   port: '5432'
```

## Comparing `pic_rucio-0.1.2.data/data/etc/rucio.cfg.atlas.client.template` & `pic_rucio-0.1.3.data/data/etc/rucio.cfg.atlas.client.template`

 * *Files identical despite different names*

## Comparing `pic_rucio-0.1.2.data/scripts/pic_rucio` & `pic_rucio-0.1.3.data/scripts/pic_rucio`

 * *Files identical despite different names*

## Comparing `pic_rucio-0.1.2.dist-info/LICENSE` & `pic_rucio-0.1.3.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `pic_rucio-0.1.2.dist-info/METADATA` & `pic_rucio-0.1.3.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: pic-rucio
-Version: 0.1.2
+Version: 0.1.3
 Summary: PIC rucio client transfer package
 Home-page: https://gitlab.pic.es/rucio/rucio-client
 Author: Agustin Bruzzese
 Author-email: bruzzese@pic.es
 License: UNKNOWN
 Platform: UNKNOWN
 Classifier: Development Status :: 5 - Production/Stable
```

## Comparing `pic_rucio-0.1.2.dist-info/RECORD` & `pic_rucio-0.1.3.dist-info/RECORD`

 * *Files 11% similar despite different names*

```diff
@@ -1,16 +1,16 @@
-pic_rucio-0.1.2.data/data/etc/rucio.cfg.atlas.client.template,sha256=O24QKo-0OX4Clj7Bp2Bv9W-b0NtLkyYg3jNNpz_alr0,1311
-pic_rucio-0.1.2.data/scripts/pic_rucio,sha256=s3c0XN-iYWi12Xm3pyBgycNUthoRQv9pFM-wzNoz3qw,2020
+pic_rucio-0.1.3.data/data/etc/rucio.cfg.atlas.client.template,sha256=O24QKo-0OX4Clj7Bp2Bv9W-b0NtLkyYg3jNNpz_alr0,1311
+pic_rucio-0.1.3.data/scripts/pic_rucio,sha256=s3c0XN-iYWi12Xm3pyBgycNUthoRQv9pFM-wzNoz3qw,2020
 transfer_agents/__init__.py,sha256=t0U5isCeR-Q_g4ZbCNTGTELmRw2X6_6EJhP9HZZx--0,163
 transfer_agents/commons.py,sha256=m5qy3_TR-A8G4lKH8Nr6pC5RWBjkn_keQIsvuGTBC7U,1755
 transfer_agents/db_functions.py,sha256=0o7cOmB2XNVuWzBSLNlv-I4qa3F0bYiIjv9O8u1n34Y,6838
 transfer_agents/es_body.json,sha256=HITEk7oT_0rFsG7JXwrWjrQqpkkq84pJxXFyAcswdtU,1397
-transfer_agents/es_query.py,sha256=SNLWofLSui7nKzczxEkjWLKsnSJ0NQsSAjPMQpucVaI,10738
+transfer_agents/es_query.py,sha256=vmI91pEgurEpLDBsB5w0zOkF6goX5yTyNfik83ZKE5M,10646
 transfer_agents/metadata.py,sha256=nIuW82PcyyufRCkoU0H6CytA1_tBzmkc3lfT33F8L_k,10377
 transfer_agents/requirements.txt,sha256=MJS1hkyAgqOhJPvvieDkwro43xW5ByASgvRIg3NHnmk,174
 transfer_agents/rucio_functions.py,sha256=P_WWTOpxyBAbEvEQhoQR08bdH8Pi2VRN2yoS_KiYonY,27731
-transfer_agents/sample.yaml,sha256=f23c9ew6hNNFSpdfleyTx0Z2pPuO0cCE48qPe3ii__M,31370
-pic_rucio-0.1.2.dist-info/LICENSE,sha256=7EI8xVBu6h_7_JlVw-yPhhOZlpY9hP8wal7kHtqKT_E,1074
-pic_rucio-0.1.2.dist-info/METADATA,sha256=0ydq_X2e8MenzVJEPEE9MP1z4mb2Okcoz-q-xPJtFXM,3154
-pic_rucio-0.1.2.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-pic_rucio-0.1.2.dist-info/top_level.txt,sha256=XiOn502fTf5gjAlVYarBmZhXER2pjujhDQSVC00cgBg,34
-pic_rucio-0.1.2.dist-info/RECORD,,
+transfer_agents/sample.yaml,sha256=n-snp_BTo7fcx66hH7rxxw6nmCdRfpU3WbVxzd6rDhk,31461
+pic_rucio-0.1.3.dist-info/LICENSE,sha256=7EI8xVBu6h_7_JlVw-yPhhOZlpY9hP8wal7kHtqKT_E,1074
+pic_rucio-0.1.3.dist-info/METADATA,sha256=QN25j7bzN2RlKtR0NZz7lqpeTcg3PcSG-F98SIQUd6Q,3154
+pic_rucio-0.1.3.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+pic_rucio-0.1.3.dist-info/top_level.txt,sha256=XiOn502fTf5gjAlVYarBmZhXER2pjujhDQSVC00cgBg,34
+pic_rucio-0.1.3.dist-info/RECORD,,
```

